{
  "hash": "9ed47b8759559162e466dad6676ee8fb",
  "result": {
    "markdown": "---\ntitle: \"Data Acquisition\"\nauthor: \"Franziska Nissen\"\n---\n\n\n# Challenge 2.1\n\nFor the first challenge I looked up the weather in Moliets-et-Maa since this is one of my vacation destinations for this summer.\n\n\n::: {.cell hash='02_data_acquisition_cache/html/unnamed-chunk-1_047caab7880ddab456ef6ca06e7a96e5'}\n\n```{.r .cell-code}\n# 1.0 LIBRARIES ----\n\nlibrary(tidyverse) # Main Package - Loads dplyr, purrr, etc.\nlibrary(rvest)     # HTML Hacking & Web Scraping\nlibrary(xopen)     # Quickly opening URLs\nlibrary(jsonlite)  # converts JSON files to R objects\nlibrary(glue)      # concatenate strings\nlibrary(stringi)   # character string/text processing\nlibrary(lubridate)\n\n# Moliets' weather forecast for the next 16 days (21.05.2023) ----\nweather_moliets          <- \"https://www.wetter.com/wetter_aktuell/wettervorhersage/16_tagesvorhersage/frankreich/moliets-et-maa/FR2993520.html\"\nhtml_weather    <- weather_moliets %>%\n  read_html()\n\n# The first week had another node than the last days, so I had to extract them two different ways and eventually add them back together\ndate_8to16 <- html_weather %>%\n  html_nodes(\".no-hover .date\")%>%\n  html_text() %>%\n  stringr::str_extract(\"\\\\w+[:space:]\\\\d+\\\\.\\\\d+\\\\.\") \ndate_8to16\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] \"MO 29.05.\" \"DI 30.05.\" \"MI 31.05.\" \"DO 01.06.\" \"FR 02.06.\" \"SA 03.06.\"\n#> [7] \"SO 04.06.\" \"MO 05.06.\" \"DI 06.06.\"\n```\n:::\n\n```{.r .cell-code}\ndate_merged <- html_weather %>%\n  html_nodes(\".bg--blue-gradient .date\") %>% # these are only the first 7 days\n  html_text() %>%\n  c(date_8to16) # so I added the last 11 days\ndate_merged \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>  [1] \"MO 22.05.\" \"DI 23.05.\" \"MI 24.05.\" \"DO 25.05.\" \"FR 26.05.\" \"SA 27.05.\"\n#>  [7] \"SO 28.05.\" \"MO 29.05.\" \"DI 30.05.\" \"MI 31.05.\" \"DO 01.06.\" \"FR 02.06.\"\n#> [13] \"SA 03.06.\" \"SO 04.06.\" \"MO 05.06.\" \"DI 06.06.\"\n```\n:::\n\n```{.r .cell-code}\nweekday <- date_merged %>%\n  stringr::str_extract(\"\\\\w+\") # removes the date\nweekday\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>  [1] \"MO\" \"DI\" \"MI\" \"DO\" \"FR\" \"SA\" \"SO\" \"MO\" \"DI\" \"MI\" \"DO\" \"FR\" \"SA\" \"SO\" \"MO\"\n#> [16] \"DI\"\n```\n:::\n\n```{.r .cell-code}\n# the dates of the weather forecast did not come with the year\n# Create a year vector, so I can add it to the date (dd.mm.) to turn it into the date format\nyear <- c(\"2023\",\"2023\",\"2023\",\"2023\",\"2023\",\n          \"2023\",\"2023\",\"2023\",\"2023\",\"2023\",\n          \"2023\",\"2023\",\"2023\",\"2023\",\"2023\",\"2023\") # I didn't know how to make it pretty\n\ndate <- date_merged %>%\n  stringr::str_extract(\"\\\\d+\\\\.\\\\d+\\\\.\") %>%  # extracting the weekday\n  paste(year) %>%\n  stringr::str_remove(\"[:space:]\") %>% # removing the space\n  dmy() # That is the final date\ndate\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>  [1] \"2023-05-22\" \"2023-05-23\" \"2023-05-24\" \"2023-05-25\" \"2023-05-26\"\n#>  [6] \"2023-05-27\" \"2023-05-28\" \"2023-05-29\" \"2023-05-30\" \"2023-05-31\"\n#> [11] \"2023-06-01\" \"2023-06-02\" \"2023-06-03\" \"2023-06-04\" \"2023-06-05\"\n#> [16] \"2023-06-06\"\n```\n:::\n\n```{.r .cell-code}\nmax_temp <- html_weather %>%\n  html_nodes(\".temp-max\") %>%\n  html_text()\nmax_temp\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>  [1] \"19°\" \"19°\" \"19°\" \"21°\" \"25°\" \"17°\" \"16°\" \"17°\" \"21°\" \"21°\" \"22°\" \"25°\"\n#> [13] \"23°\" \"20°\" \"19°\" \"20°\"\n```\n:::\n\n```{.r .cell-code}\nmin_temp <- html_weather %>%\n  html_nodes(\".temp-min\") %>%\n  html_text() %>%\n  stringr::str_extract(\"\\\\d+°\") # removes the space and \"/\"\nmin_temp\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>  [1] \"15°\" \"15°\" \"15°\" \"15°\" \"15°\" \"12°\" \"13°\" \"15°\" \"12°\" \"14°\" \"16°\" \"16°\"\n#> [13] \"16°\" \"17°\" \"17°\" \"17°\"\n```\n:::\n\n```{.r .cell-code}\nweather_state <- html_weather %>%\n  html_nodes(\".weather-state\") %>%\n  html_text() %>%\n  stringr::str_extract(\"\\\\w+[:space:]\\\\w+|\\\\w+\") # wasn't pretty w/o the extraction\nweather_state\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>  [1] \"wolkig\"         \"wolkig\"         \"wolkig\"         \"leicht bewölkt\"\n#>  [5] \"leicht bewölkt\" \"sonnig\"         \"sonnig\"         \"leicht bewölkt\"\n#>  [9] \"sonnig\"         \"sonnig\"         \"sonnig\"         \"leicht bewölkt\"\n#> [13] \"leicht bewölkt\" \"Regen\"          \"wolkig\"         \"wolkig\"\n```\n:::\n\n```{.r .cell-code}\n# The final tibble\nWeather_tbl_joined <- tibble(date, weekday, max_temp, min_temp, weather_state)\nWeather_tbl_joined\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"date\"],\"name\":[1],\"type\":[\"date\"],\"align\":[\"right\"]},{\"label\":[\"weekday\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"max_temp\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"min_temp\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"weather_state\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"2023-05-22\",\"2\":\"MO\",\"3\":\"19°\",\"4\":\"15°\",\"5\":\"wolkig\"},{\"1\":\"2023-05-23\",\"2\":\"DI\",\"3\":\"19°\",\"4\":\"15°\",\"5\":\"wolkig\"},{\"1\":\"2023-05-24\",\"2\":\"MI\",\"3\":\"19°\",\"4\":\"15°\",\"5\":\"wolkig\"},{\"1\":\"2023-05-25\",\"2\":\"DO\",\"3\":\"21°\",\"4\":\"15°\",\"5\":\"leicht bewölkt\"},{\"1\":\"2023-05-26\",\"2\":\"FR\",\"3\":\"25°\",\"4\":\"15°\",\"5\":\"leicht bewölkt\"},{\"1\":\"2023-05-27\",\"2\":\"SA\",\"3\":\"17°\",\"4\":\"12°\",\"5\":\"sonnig\"},{\"1\":\"2023-05-28\",\"2\":\"SO\",\"3\":\"16°\",\"4\":\"13°\",\"5\":\"sonnig\"},{\"1\":\"2023-05-29\",\"2\":\"MO\",\"3\":\"17°\",\"4\":\"15°\",\"5\":\"leicht bewölkt\"},{\"1\":\"2023-05-30\",\"2\":\"DI\",\"3\":\"21°\",\"4\":\"12°\",\"5\":\"sonnig\"},{\"1\":\"2023-05-31\",\"2\":\"MI\",\"3\":\"21°\",\"4\":\"14°\",\"5\":\"sonnig\"},{\"1\":\"2023-06-01\",\"2\":\"DO\",\"3\":\"22°\",\"4\":\"16°\",\"5\":\"sonnig\"},{\"1\":\"2023-06-02\",\"2\":\"FR\",\"3\":\"25°\",\"4\":\"16°\",\"5\":\"leicht bewölkt\"},{\"1\":\"2023-06-03\",\"2\":\"SA\",\"3\":\"23°\",\"4\":\"16°\",\"5\":\"leicht bewölkt\"},{\"1\":\"2023-06-04\",\"2\":\"SO\",\"3\":\"20°\",\"4\":\"17°\",\"5\":\"Regen\"},{\"1\":\"2023-06-05\",\"2\":\"MO\",\"3\":\"19°\",\"4\":\"17°\",\"5\":\"wolkig\"},{\"1\":\"2023-06-06\",\"2\":\"DI\",\"3\":\"20°\",\"4\":\"17°\",\"5\":\"wolkig\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}