{
  "hash": "63362ed7af72dc734190a1e7c6f645e6",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Franziska Nissen\"\n---\n\n\nI had major problems with the data.table-package and could not complete this challenge. I think I would be able to do it if I still had more time to understand it.\n\n# Challenge\n\nI used the reduced data since the link for the original data did not work.\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_e74dec393e8403968647150d40978efe'}\n\n```{.r .cell-code}\nlibrary(vroom)\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> -- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --\n#> v dplyr     1.1.2     v readr     2.1.4\n#> v forcats   1.0.0     v stringr   1.5.0\n#> v ggplot2   3.4.2     v tibble    3.2.1\n#> v lubridate 1.9.2     v tidyr     1.3.0\n#> v purrr     1.0.1     \n#> -- Conflicts ------------------------------------------ tidyverse_conflicts() --\n#> x readr::col_character()   masks vroom::col_character()\n#> x readr::col_date()        masks vroom::col_date()\n#> x readr::col_datetime()    masks vroom::col_datetime()\n#> x readr::col_double()      masks vroom::col_double()\n#> x readr::col_factor()      masks vroom::col_factor()\n#> x readr::col_guess()       masks vroom::col_guess()\n#> x readr::col_integer()     masks vroom::col_integer()\n#> x readr::col_logical()     masks vroom::col_logical()\n#> x readr::col_number()      masks vroom::col_number()\n#> x readr::col_skip()        masks vroom::col_skip()\n#> x readr::col_time()        masks vroom::col_time()\n#> x readr::cols()            masks vroom::cols()\n#> x readr::date_names_lang() masks vroom::date_names_lang()\n#> x readr::default_locale()  masks vroom::default_locale()\n#> x dplyr::filter()          masks stats::filter()\n#> x readr::fwf_cols()        masks vroom::fwf_cols()\n#> x readr::fwf_empty()       masks vroom::fwf_empty()\n#> x readr::fwf_positions()   masks vroom::fwf_positions()\n#> x readr::fwf_widths()      masks vroom::fwf_widths()\n#> x dplyr::lag()             masks stats::lag()\n#> x readr::locale()          masks vroom::locale()\n#> x readr::output_column()   masks vroom::output_column()\n#> x readr::problems()        masks vroom::problems()\n#> i Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attache Paket: 'data.table'\n#> \n#> Die folgenden Objekte sind maskiert von 'package:lubridate':\n#> \n#>     hour, isoweek, mday, minute, month, quarter, second, wday, week,\n#>     yday, year\n#> \n#> Die folgenden Objekte sind maskiert von 'package:dplyr':\n#> \n#>     between, first, last\n#> \n#> Das folgende Objekt ist maskiert 'package:purrr':\n#> \n#>     transpose\n```\n:::\n:::\n\n\n## **Patent Dominance**\n\n**What US company / corporation has the most patents? List the 10 US companies with the most assigned/granted patents.**\n\nI think I did okay with the first question, but I did not really use the data.table-package. I guess I forgot to actually turn it into a data.table. And I don't know if I even used the right columns. \n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-2_7a8dda33e50ee3eefef7a07a35ac3636'}\n\n```{.r .cell-code}\n# Data preparation ----\n# Alternative 1:\ncol_types <- list(    # reduced because the link for the original USPTO data was broken\n  id = col_character(),\n  #type = col_character(),\n  #number = col_character(),\n  #country = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  #abstract = col_character(),\n  #title = col_character(),\n  #kind = col_character(),\n  num_claims = col_double()\n  #filename = col_character(),\n  #withdrawn = col_double()\n)\n\npatent_tbl <- vroom(\n  file       = \"../../Patent_data_reduced/patent.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n# assignee_tbl prep\nassignee_col_types <- list(\n  id = col_character(),\n  type = col_character(),\n  organization = col_character()\n)\n\nassignee_tbl <- vroom(\n  file       = \"../../Patent_data_reduced/assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = assignee_col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n# patent_assignee_tbl prep\npatent_assignee_col_types <- list(\n  patent_id = col_character(),\n  assignee_id = col_character()\n)\n\npatent_assignee_tbl <- vroom(\n  file       = \"../../Patent_data_reduced/patent_assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = patent_assignee_col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n\n# 1. Patent Dominance: What US company / corporation has the most patents? ----\n# List the 10 US companies with the most assigned/granted patents.\n\n# Rename id to assignee_id\nsetnames(assignee_tbl, \"id\", \"assignee_id\")\n\n# Combine Data\ncombined_assignee_tbl <- merge(x = assignee_tbl, y = patent_assignee_tbl,\n                               by = \"assignee_id\",\n                               all.x = TRUE, \n                               all.y = FALSE)\n\nsetnames(patent_tbl, \"id\", \"patent_id\")\n\ncombine_patent_assignee_tbl <-  merge(x = combined_assignee_tbl, y = patent_tbl,\n                                      by = \"patent_id\",\n                                      all.x = TRUE, \n                                      all.y = FALSE)\n\ncombine_patent_assignee_tbl %>%\n  group_by(organization) %>%\n  summarise(granted_patents = sum(num_claims)) %>%\n  ungroup() %>%\n  arrange(desc(granted_patents)) %>%\n  slice(1:10)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"granted_patents\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"122231\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"91821\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"87814\"},{\"1\":\"Google Inc.\",\"2\":\"54881\"},{\"1\":\"Microsoft Corporation\",\"2\":\"53989\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"51319\"},{\"1\":\"Sony Corporation\",\"2\":\"47985\"},{\"1\":\"Apple Inc.\",\"2\":\"44339\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"36149\"},{\"1\":\"General Electric Company\",\"2\":\"32531\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# I couldn't extract US companies\n```\n:::\n\n\n## **Recent patent activity**\n\n**What US company had the most patents granted in August 2014? List the top 10 companies with the most new granted patents for August 2014.**\n\nI couldn't finish this one. I did not understand how to set up the command to sort it by the organization, year, and month.\n\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-3_ad339d1f060a51a97ac9a054d36aaddc'}\n\n```{.r .cell-code}\n# 2. Recent patent activity: What US company had the most patents granted in August 2014? ----\n# List the top 10 companies with the most new granted patents for August 2014.\n\nsplit_date_patent_tbl <- combine_patent_assignee_tbl %>%\n  mutate(date = as.character(date))%>%\n  separate(col = date,\n           into = c(\"year\", \"month\", \"day\"),\n           sep = \"-\", remove = TRUE) %>%\n  mutate(\n    year = as.numeric(year),\n    month = as.numeric(month),\n    day = as.numeric(day)\n  )\n\nsplit_date_patent_dt <- as.data.table(split_date_patent_tbl)\nclass(split_date_patent_dt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] \"data.table\" \"data.frame\"\n```\n:::\n\n```{.r .cell-code}\nsplit_date_patent_dt %>%\n  mutate(num_claims = as.numeric(num_claims)) %>%\n  view()\n\nsetkey(split_date_patent_dt, \"organization\")\nkey(split_date_patent_dt)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> [1] \"organization\"\n```\n:::\n\n```{.r .cell-code}\nsetorderv(split_date_patent_dt, c(\"organization\", \"year\", \"month\"))\n\n# split_date_patent_dt[, ] # I don't know...\n```\n:::\n\n\n## **Innovation in Tech**\n\n**What is the most innovative tech sector? For the top 10 companies (worldwide) with the most patents, what are the top 5 USPTO tech main classes?**\n\nI did not even start this one.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}